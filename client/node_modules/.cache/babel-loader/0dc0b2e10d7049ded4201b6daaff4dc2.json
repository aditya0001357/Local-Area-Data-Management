{"ast":null,"code":"import _slicedToArray from\"C:/Users/singh/Downloads/Local-Area-Website-DBMS--main/Local-Area-Website-DBMS--main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import'bootstrap/dist/css/bootstrap.min.css';import Form from'react-bootstrap/Form';import Modal from'react-bootstrap/Modal';import Button from'@material-ui/core/Button';import Axios from'axios';// import Visibility from '@material-ui/icons/Visibility';\n// import VisibilityOff from '@material-ui/icons/VisibilityOff';\n// import IconButton from '@material-ui/core/IconButton';\nimport{useSnackbar}from'notistack';function PersonalInfoUpdate(props){var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;// const [show, setShow] = useState(props.show);\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];// const [password, setPassword] = useState('');\nvar _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),Bdate=_useState6[0],setBdate=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),sex=_useState8[0],setSex=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),salary=_useState10[0],setSalary=_useState10[1];// const [showPass, setShowPass] = useState(false);\nvar handleClose=function handleClose(){props.close();// setShow(false);\n};useEffect(function(){// Axios.post('http://localhost:4000/getpersonalinfo', {\n//     Pid: props.Pid\n// })\n//     .then(res => {\n//         if (res.data === 'ERROR') {\n//             //incomplete\n//             alert('some error occured during fetching ');\n//         }\n//         else {\n//             { res.data.NAME && setName(res.data.NAME) }\n//             { res.data.EMAIL && setEmail(res.data.EMAIL) }\n//             { res.data.password && setPassword(res.data.PASSWORD) }\n//             { res.data.Bdate && setBdate(res.data.BDATE) }\n//             { res.data.SEX && setSex(res.data.SEX) }\n//             { res.data.SALARY && setSalary(res.data.SALARY) }\n//         }\n//     })\n//     .catch(err => {\n//         throw (err)\n//     })\nif(props.info.length>0){var _props$info$=props.info[0],NAME=_props$info$.NAME,EMAIL=_props$info$.EMAIL,SEX=_props$info$.SEX,SALARY=_props$info$.SALARY,BDATE=_props$info$.BDATE;NAME&&setName(NAME);EMAIL&&setEmail(EMAIL);// PASSWORD && setPassword(PASSWORD)\nBDATE&&setBdate(BDATE.toString().substring(0,10));SEX&&setSex(SEX);SALARY&&setSalary(SALARY);}},[]);var handleSubmit=function handleSubmit(){if(name===''||email===''||Bdate===''||sex===''||salary===''){// alert('please fill the information corectly');\nenqueueSnackbar(\"Please fill Details completely\",{variant:'error'});}else{props.close();Axios.post('http://localhost:4000/updatepersonalinfo',{Pid:props.Pid,name:name,email:email,sex:sex,salary:salary,Bdate:Bdate// password: password,\n}).then(function(res){//incomplete\nif(res.data==='ERROR'){// alert('Update Unsuccesfull');\nenqueueSnackbar(\"unsuccesful\",{variant:'error'});}else{props.update(res.data);enqueueSnackbar(\"update Succesflly\",{variant:'success'});}}).catch(function(err){enqueueSnackbar(\"Error occured\",{variant:'error'});});}// could be better\n// window.location.assign(`http://localhost:3000/home?id=${props.Pid}`)\n};return/*#__PURE__*/_jsxs(Modal,{show:props.show,onHide:handleClose,\"aria-labelledby\":\"contained-modal-title-vcenter\",style:{marginTop:\"40px\"},children:[/*#__PURE__*/_jsx(Modal.Header,{children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Add/Update Your Information\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"name\",type:\"text\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"email id\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"email\",type:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Gender\"}),/*#__PURE__*/_jsxs(Form.Control,{name:\"sex\",as:\"select\",value:sex,onChange:function onChange(e){return setSex(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{selected:true,value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"M\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"F\",children:\"Female\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Birth Date\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"Bdate\",type:\"date\",value:Bdate,onChange:function onChange(e){return setBdate(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Salary\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"salary\",type:\"number\",value:salary,onChange:function onChange(e){return setSalary(e.target.value);}})]})]})}),/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:handleClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:handleSubmit,children:\"Submit\"}),/*#__PURE__*/_jsx(Modal.Footer,{})]});}export default PersonalInfoUpdate;","map":{"version":3,"sources":["C:/Users/singh/Downloads/Local-Area-Website-DBMS--main/Local-Area-Website-DBMS--main/client/src/components/modal/PersonalInfoUpdate.js"],"names":["React","useState","useEffect","Form","Modal","Button","Axios","useSnackbar","PersonalInfoUpdate","props","enqueueSnackbar","name","setName","email","setEmail","Bdate","setBdate","sex","setSex","salary","setSalary","handleClose","close","info","length","NAME","EMAIL","SEX","SALARY","BDATE","toString","substring","handleSubmit","variant","post","Pid","then","res","data","update","catch","err","show","marginTop","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport Form from 'react-bootstrap/Form'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Button from '@material-ui/core/Button'\r\nimport Axios from 'axios';\r\n\r\n// import Visibility from '@material-ui/icons/Visibility';\r\n// import VisibilityOff from '@material-ui/icons/VisibilityOff';\r\n// import IconButton from '@material-ui/core/IconButton';\r\n\r\nimport { useSnackbar } from 'notistack';\r\n\r\n\r\n\r\nfunction PersonalInfoUpdate(props) {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n\r\n\r\n    // const [show, setShow] = useState(props.show);\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    // const [password, setPassword] = useState('');\r\n    const [Bdate, setBdate] = useState('');\r\n    const [sex, setSex] = useState('');\r\n    const [salary, setSalary] = useState('');\r\n\r\n    // const [showPass, setShowPass] = useState(false);\r\n\r\n    const handleClose = () => {\r\n        props.close();\r\n        // setShow(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        // Axios.post('http://localhost:4000/getpersonalinfo', {\r\n        //     Pid: props.Pid\r\n        // })\r\n        //     .then(res => {\r\n        //         if (res.data === 'ERROR') {\r\n        //             //incomplete\r\n        //             alert('some error occured during fetching ');\r\n        //         }\r\n        //         else {\r\n        //             { res.data.NAME && setName(res.data.NAME) }\r\n        //             { res.data.EMAIL && setEmail(res.data.EMAIL) }\r\n        //             { res.data.password && setPassword(res.data.PASSWORD) }\r\n        //             { res.data.Bdate && setBdate(res.data.BDATE) }\r\n        //             { res.data.SEX && setSex(res.data.SEX) }\r\n        //             { res.data.SALARY && setSalary(res.data.SALARY) }\r\n        //         }\r\n        //     })\r\n        //     .catch(err => {\r\n        //         throw (err)\r\n        //     })\r\n\r\n        if (props.info.length > 0) {\r\n            const { NAME, EMAIL, SEX, SALARY, BDATE } = props.info[0];\r\n            NAME && setName(NAME);\r\n            EMAIL && setEmail(EMAIL)\r\n            // PASSWORD && setPassword(PASSWORD)\r\n            BDATE && setBdate(BDATE.toString().substring(0, 10))\r\n            SEX && setSex(SEX)\r\n            SALARY && setSalary(SALARY)\r\n        }\r\n    }, [])\r\n\r\n    const handleSubmit = () => {\r\n\r\n        if (name === '' || email === '' || Bdate === '' || sex === '' || salary === '') {\r\n            // alert('please fill the information corectly');\r\n            enqueueSnackbar(\"Please fill Details completely\", { variant: 'error' });\r\n        }\r\n        else {\r\n            props.close();\r\n            Axios.post('http://localhost:4000/updatepersonalinfo', {\r\n                Pid: props.Pid,\r\n                name: name,\r\n                email: email,\r\n                sex: sex,\r\n                salary: salary,\r\n                Bdate: Bdate,\r\n                // password: password,\r\n            })\r\n                .then(res => {\r\n                    //incomplete\r\n                    if (res.data === 'ERROR') {\r\n                        // alert('Update Unsuccesfull');\r\n                        enqueueSnackbar(\"unsuccesful\", { variant: 'error' });\r\n                    }\r\n                    else {\r\n                        props.update(res.data);\r\n                        enqueueSnackbar(\"update Succesflly\", { variant: 'success' });\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    enqueueSnackbar(\"Error occured\", { variant: 'error' });\r\n                })\r\n        }\r\n        // could be better\r\n        // window.location.assign(`http://localhost:3000/home?id=${props.Pid}`)\r\n    }\r\n\r\n    return (\r\n        <Modal show={props.show} onHide={handleClose} aria-labelledby=\"contained-modal-title-vcenter\" style={{ marginTop: \"40px\" }}>\r\n            <Modal.Header>\r\n                <Modal.Title>Add/Update Your Information</Modal.Title>\r\n            </Modal.Header>\r\n\r\n            <Modal.Body>\r\n                <Form>\r\n                    <Form.Group>\r\n                        <Form.Label>Name</Form.Label>\r\n                        <Form.Control name=\"name\" type=\"text\" value={name} onChange={(e) => setName(e.target.value)} />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group>\r\n                        <Form.Label>email id</Form.Label>\r\n                        <Form.Control name='email' type='email' value={email} onChange={(e) => setEmail(e.target.value)} />\r\n                    </Form.Group>\r\n\r\n\r\n\r\n                    <Form.Group>\r\n                        <Form.Label>Gender</Form.Label>\r\n                        <Form.Control name=\"sex\" as=\"select\" value={sex} onChange={(e) => setSex(e.target.value)}>\r\n                            <option selected value=''>Select</option>\r\n                            <option value=\"M\">Male</option>\r\n                            <option value=\"F\">Female</option>\r\n                        </Form.Control>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group>\r\n                        <Form.Label>Birth Date</Form.Label>\r\n                        <Form.Control name=\"Bdate\" type=\"date\" value={Bdate} onChange={(e) => setBdate(e.target.value)} />\r\n                    </Form.Group>\r\n\r\n\r\n\r\n                    <Form.Group>\r\n                        <Form.Label>Salary</Form.Label>\r\n                        <Form.Control name=\"salary\" type=\"number\" value={salary} onChange={(e) => setSalary(e.target.value)} />\r\n                    </Form.Group>\r\n                </Form>\r\n            </Modal.Body>\r\n            <Button color=\"secondary\" onClick={handleClose}>Cancel</Button>\r\n            <Button color=\"primary\" onClick={handleSubmit}>Submit</Button>\r\n            <Modal.Footer>\r\n\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default PersonalInfoUpdate;"]},"metadata":{},"sourceType":"module"}