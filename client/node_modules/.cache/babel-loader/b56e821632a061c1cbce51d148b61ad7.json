{"ast":null,"code":"import _slicedToArray from\"C:/Users/singh/Downloads/Local-Area-Website-DBMS--main/Local-Area-Website-DBMS--main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';// import 'bootstrap/dist/css/bootstrap.min.css';\nimport Form from'react-bootstrap/Form';import Modal from'react-bootstrap/Modal';import Button from'@material-ui/core/Button';import Axios from'axios';import{useSnackbar}from'notistack';function PersonRemove(props){var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var Pid=props.Pid;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),selectedPerson=_useState4[0],setSelectedPerson=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),admin=_useState6[0],setAdmin=_useState6[1];useEffect(function(){Axios.get('http://localhost:4000/persons').then(function(res){if(res.data==='ERROR'){// alert('error thrown');\nenqueueSnackbar('Error thrown',{variant:'error'});}else{var arr=res.data.filter(function(person){return person.PERSON_ID!==Pid;});setPersons(arr);}}).catch(function(err){// alert('error occured')\nenqueueSnackbar('Error occured',{variant:'error'});});},[]);var handleSubmit=function handleSubmit(){if(selectedPerson===''){// alert('select a person to change the admin rights')\nenqueueSnackbar('Select a Person',{variant:'warning'});}else{props.close();Axios.post('http://localhost:4000/updateadmin',{Pid:selectedPerson}).then(function(res){if(res.data==='ERROR'){// alert('error thrown')\nenqueueSnackbar('Error occured',{variant:'error'});}else{// alert('Updated Succesfully')\nenqueueSnackbar('Updated Succesfully',{variant:'success'});}}).catch(function(err){console.log(err);// alert('error occured')\nenqueueSnackbar('Error occured',{variant:'error'});});}};// function isAdmin() {\n//     persons.forEach(person => {\n//         if (person.PERSON_ID === selectedPerson) {\n//             return person.ISADMIN;\n//         }\n//     });\n// return false;\n// }\n// const handleChange = (e) => {\n//     setSelectedPerson(e.target.value);\n// console.log(admin+\"before setting\");\n// if (isAdmin()) {\n//     console.log('true returned');\n//     setAdmin(true);\n// }\n// else {\n//     console.log('false returned');\n//     setAdmin(true);\n// }\n// console.log('after seting'+admin);\n// if (selectedPerson !== '') {\n//     Axios.post('http://localhost:4000/getadmin', {\n//         Pid: selectedPerson,\n//     })\n//         .then(res => {\n//             if (res.data === '1' || res.data === 1) {\n//                 setAdmin(true);\n//             }\n//             else {\n//                 setAdmin(false)\n//             }\n//         })\n// }\n// }\nreturn/*#__PURE__*/_jsxs(Modal,{show:true,onHide:props.close,children:[/*#__PURE__*/_jsx(Modal.Header,{children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Select The Person To Add / Remove a Admin of the Area\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Select Person\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",name:\"person_id\",value:selectedPerson,onChange:function onChange(e){return setSelectedPerson(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),persons.map(function(person){return/*#__PURE__*/_jsx(\"option\",{value:person.PERSON_ID,children:person.PERSON_ID+\" \"+person.NAME});})]})]})})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:function onClick(){return props.close();},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:handleSubmit,children:\"Add Admin\"})]})]});}export default PersonRemove;","map":{"version":3,"sources":["C:/Users/singh/Downloads/Local-Area-Website-DBMS--main/Local-Area-Website-DBMS--main/client/src/components/modal/admin/PersonAdmin.js"],"names":["React","useState","useEffect","Form","Modal","Button","Axios","useSnackbar","PersonRemove","props","enqueueSnackbar","Pid","persons","setPersons","selectedPerson","setSelectedPerson","admin","setAdmin","get","then","res","data","variant","arr","filter","person","PERSON_ID","catch","err","handleSubmit","close","post","console","log","e","target","value","map","NAME"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\n// import 'bootstrap/dist/css/bootstrap.min.css';\r\nimport Form from 'react-bootstrap/Form'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Button from '@material-ui/core/Button'\r\nimport Axios from 'axios';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nfunction PersonRemove(props) {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const { Pid } = props;\r\n    const [persons, setPersons] = useState([]);\r\n    const [selectedPerson, setSelectedPerson] = useState('');\r\n\r\n    const [admin, setAdmin] = useState(false);\r\n\r\n    useEffect(() => {\r\n        Axios.get('http://localhost:4000/persons')\r\n            .then(res => {\r\n                if (res.data === 'ERROR') {\r\n                    // alert('error thrown');\r\n                    enqueueSnackbar('Error thrown', { variant: 'error' });\r\n                }\r\n                else {\r\n                    var arr = res.data.filter(person => {\r\n                        return person.PERSON_ID !== Pid;\r\n                    })\r\n\r\n                    setPersons(arr);\r\n                }\r\n\r\n            })\r\n            .catch(err => {\r\n                // alert('error occured')\r\n                enqueueSnackbar('Error occured', { variant: 'error' });\r\n            })\r\n    }, [])\r\n\r\n    const handleSubmit = () => {\r\n        \r\n        if (selectedPerson === '') {\r\n            // alert('select a person to change the admin rights')\r\n            enqueueSnackbar('Select a Person', { variant: 'warning' });\r\n            \r\n        }\r\n        else {\r\n            props.close();\r\n            Axios.post('http://localhost:4000/updateadmin', {\r\n                Pid: selectedPerson,\r\n\r\n            })\r\n                .then(res => {\r\n                    if (res.data === 'ERROR') {\r\n                        // alert('error thrown')\r\n                        enqueueSnackbar('Error occured', { variant: 'error' });\r\n\r\n                    }\r\n                    else {\r\n                        // alert('Updated Succesfully')\r\n                        enqueueSnackbar('Updated Succesfully', { variant: 'success' });\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    // alert('error occured')\r\n                    enqueueSnackbar('Error occured', { variant: 'error' });\r\n                })\r\n        }\r\n    }\r\n    // function isAdmin() {\r\n    //     persons.forEach(person => {\r\n    //         if (person.PERSON_ID === selectedPerson) {\r\n    //             return person.ISADMIN;\r\n    //         }\r\n    //     });\r\n    // return false;\r\n    // }\r\n\r\n    // const handleChange = (e) => {\r\n    //     setSelectedPerson(e.target.value);\r\n    // console.log(admin+\"before setting\");\r\n    // if (isAdmin()) {\r\n    //     console.log('true returned');\r\n    //     setAdmin(true);\r\n    // }\r\n    // else {\r\n    //     console.log('false returned');\r\n    //     setAdmin(true);\r\n    // }\r\n    // console.log('after seting'+admin);\r\n    // if (selectedPerson !== '') {\r\n\r\n    //     Axios.post('http://localhost:4000/getadmin', {\r\n    //         Pid: selectedPerson,\r\n    //     })\r\n    //         .then(res => {\r\n    //             if (res.data === '1' || res.data === 1) {\r\n    //                 setAdmin(true);\r\n    //             }\r\n    //             else {\r\n    //                 setAdmin(false)\r\n    //             }\r\n    //         })\r\n    // }\r\n    // }\r\n\r\n    return (\r\n        <Modal show={true} onHide={props.close}>\r\n            <Modal.Header>\r\n                <Modal.Title>Select The Person To Add / Remove a Admin of the Area</Modal.Title>\r\n            </Modal.Header>\r\n\r\n            <Modal.Body>\r\n                <Form>\r\n                    <Form.Group>\r\n                        <Form.Label>Select Person</Form.Label>\r\n                        <Form.Control as='select' name=\"person_id\" value={selectedPerson} onChange={(e) => setSelectedPerson(e.target.value)} >\r\n                            <option value=''>Select</option>\r\n                            {\r\n                                persons.map(person => {\r\n                                    return (\r\n                                        <option value={person.PERSON_ID}>{person.PERSON_ID + \" \" + person.NAME}</option>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </Form.Control>\r\n                    </Form.Group>\r\n                </Form>\r\n            </Modal.Body>\r\n\r\n            <Modal.Footer>\r\n                <Button color=\"secondary\" onClick={() => props.close()}>Cancel</Button>\r\n                <Button color='primary' onClick={handleSubmit}>Add Admin</Button>\r\n\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default PersonRemove;"]},"metadata":{},"sourceType":"module"}